# Coursiv 分阶段迭代方案 V4.0

**版本**: 4.0  
**日期**: 2026-01-12  
**作者**: Manus AI

---

## 一、项目范围确认

### 本次迭代包含
- ✅ Quiz 引导流程与原站逻辑完全一致
- ✅ 注册后跳转逻辑 Bug 修复
- ✅ 课程蛇形路径交互问题修复
- ✅ 课程内 Quiz 测验功能实现
- ✅ 所有 "建设中" 改为 "Coming Soon"
- ✅ 无响应按钮修复

### 本次迭代不包含
- ❌ AI Tools 完整实现（用 Coming Soon）
- ❌ 音频播放功能
- ❌ Blog 完整实现（用 Coming Soon）

---

## 二、问题清单

### 2.1 P0 - 阻塞性问题（必须修复）

| ID | 问题 | 影响 | 预计时间 |
|----|------|------|----------|
| P0-1 | Continue 按钮被 Preview mode 提示条遮挡 | 无法翻页学习内容 | 15 分钟 |
| P0-2 | 课程 ID 不匹配（`dalle` vs `dall-e`） | DALL-E 课程无法从 Dashboard 访问 | 5 分钟 |
| P0-3 | "Get Certified Today" 按钮无响应 | 用户无法进入 Quiz | 5 分钟 |
| P0-4 | "Join Now" 按钮无响应 | 用户无法进入 Challenge | 5 分钟 |
| P0-5 | Blog 导航链接无效（href="#"） | 导航不可用 | 5 分钟 |
| P0-6 | Support Center 链接无效（href="#"） | 导航不可用 | 5 分钟 |

### 2.2 P1 - 功能缺失（重要）

| ID | 问题 | 影响 | 预计时间 |
|----|------|------|----------|
| P1-1 | 课程内 Quiz 测验未显示 | Mock Quiz 数据存在但未渲染 | 1.5 小时 |
| P1-2 | Quiz 引导流程与原站差异大 | 步骤数、选项、样式不一致 | 2 小时 |
| P1-3 | 注册后有时重复进入引导流程 | 用户体验差 | 30 分钟 |
| P1-4 | 锁定模块点击无反馈 | 用户不知道为什么不能点击 | 20 分钟 |
| P1-5 | 缺少 "You're here" 标签 | 用户不知道当前学习位置 | 20 分钟 |
| P1-6 | Blog/Support 页面缺失 | 导航后 404 | 30 分钟 |

### 2.3 P2 - 体验优化（建议）

| ID | 问题 | 影响 | 预计时间 |
|----|------|------|----------|
| P2-1 | 所有 "建设中" 改为 "Coming Soon" | 中英文混用不专业 | 15 分钟 |
| P2-2 | 蛇形路径缺少连接线动画 | 视觉效果不如原站 | 45 分钟 |
| P2-3 | 课程图标使用 Emoji 而非真实 Logo | 视觉差异 | 可选 |

---

## 三、分阶段实施方案

### 阶段 1：核心交互修复（2 小时）

**目标**：修复所有阻塞性问题，确保基本功能可用

#### 1.1 任务清单

| 任务 | 描述 | 时间 |
|------|------|------|
| 1.1.1 | 修复 Continue 按钮被遮挡问题 | 15 分钟 |
| 1.1.2 | 修复课程 ID 不匹配（Dashboard 链接） | 5 分钟 |
| 1.1.3 | 修复 "Get Certified Today" 按钮 | 5 分钟 |
| 1.1.4 | 修复 "Join Now" 按钮 | 5 分钟 |
| 1.1.5 | 修复 Blog/Support 导航链接 | 10 分钟 |
| 1.1.6 | 创建 Coming Soon 页面组件 | 20 分钟 |
| 1.1.7 | 添加 Blog/Support Coming Soon 路由 | 10 分钟 |
| 1.1.8 | 替换所有 "建设中" 为 "Coming Soon" | 15 分钟 |
| 1.1.9 | 运行测试验证 | 15 分钟 |

#### 1.2 E2E 测试用例

```
TC1.1: Continue 按钮点击测试
  前置条件: 进入课程内容页 /lesson/chatgpt/chatgpt-1-1
  步骤:
    1. 点击 Continue 按钮
    2. 验证页面从 "1/3" 变为 "2/3"
    3. 再次点击 Continue
    4. 验证页面变为 "3/3"
  预期结果: 每次点击都能正常翻页

TC1.2: DALL-E 课程访问测试
  前置条件: 登录后进入 Dashboard
  步骤:
    1. 点击 DALL-E 课程卡片
    2. 验证进入课程详情页
  预期结果: 正常显示 DALL-E 课程详情

TC1.3: CTA 按钮跳转测试
  前置条件: 访问主页
  步骤:
    1. 滚动到 "Get Certified Today" 按钮
    2. 点击按钮
    3. 验证跳转到 Quiz 流程
  预期结果: 成功跳转到 /quiz/1

TC1.4: 导航链接测试
  前置条件: 访问主页
  步骤:
    1. 点击 Blog 链接
    2. 验证进入 Blog Coming Soon 页面
    3. 点击 Support Center 链接
    4. 验证进入 Support Coming Soon 页面
  预期结果: 显示 Coming Soon 页面而非 404

TC1.5: Coming Soon 文案测试
  前置条件: 访问各页面
  步骤:
    1. 搜索页面中的 "建设中" 文本
  预期结果: 无 "建设中" 文本，全部为 "Coming Soon"
```

#### 1.3 验收标准

- [ ] Continue 按钮点击后页面正常翻页
- [ ] DALL-E 课程可从 Dashboard 正常访问
- [ ] "Get Certified Today" 按钮跳转到 Quiz
- [ ] "Join Now" 按钮跳转到 Quiz
- [ ] Blog 链接进入 Coming Soon 页面
- [ ] Support Center 链接进入 Coming Soon 页面
- [ ] 无 "建设中" 中文文案
- [ ] 所有单元测试通过

---

### 阶段 2：课程 Quiz 功能实现（2 小时）

**目标**：实现课程内 Quiz 测验功能，与原站体验一致

#### 2.1 任务清单

| 任务 | 描述 | 时间 |
|------|------|------|
| 2.1.1 | 创建 QuizPage 组件 | 30 分钟 |
| 2.1.2 | 实现 Quiz 问题和选项显示 | 20 分钟 |
| 2.1.3 | 实现选项选择和反馈动画 | 20 分钟 |
| 2.1.4 | 实现正确/错误状态显示 | 15 分钟 |
| 2.1.5 | 实现解释说明显示 | 10 分钟 |
| 2.1.6 | 集成到 LessonContent 页面 | 15 分钟 |
| 2.1.7 | 添加锁定模块点击提示 | 20 分钟 |
| 2.1.8 | 添加 "You're here" 标签 | 20 分钟 |
| 2.1.9 | 运行测试验证 | 15 分钟 |

#### 2.2 Quiz 功能规格

**Quiz 界面结构**：
```
┌─────────────────────────────────────┐
│  [X]  ═══════════════════  [🔊]    │  <- 进度条
├─────────────────────────────────────┤
│                                     │
│  What does LLM stand for?           │  <- 问题
│                                     │
│  ┌─────────────────────────────┐   │
│  │  A. Large Language Model    │   │  <- 选项 A
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │  B. Long Learning Method    │   │  <- 选项 B
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │  C. Linear Language Matrix  │   │  <- 选项 C
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │  D. Latest Learning Machine │   │  <- 选项 D
│  └─────────────────────────────┘   │
│                                     │
├─────────────────────────────────────┤
│  [        Continue        ]         │  <- 提交按钮
└─────────────────────────────────────┘
```

**选择后状态**：
- 正确：选项变绿 + ✓ 图标 + 显示解释
- 错误：选项变红 + ✗ 图标 + 正确答案变绿 + 显示解释

#### 2.3 E2E 测试用例

```
TC2.1: Quiz 显示测试
  前置条件: 进入课程内容页
  步骤:
    1. 翻页到最后一页内容
    2. 点击 Continue
    3. 验证显示 Quiz 界面
  预期结果: 显示问题和 4 个选项

TC2.2: Quiz 正确答案测试
  前置条件: 进入 Quiz 界面
  步骤:
    1. 点击正确答案选项
    2. 验证选项变绿
    3. 验证显示解释说明
    4. 点击 Continue
    5. 验证返回课程详情页
  预期结果: 正确反馈 + 模块标记完成

TC2.3: Quiz 错误答案测试
  前置条件: 进入 Quiz 界面
  步骤:
    1. 点击错误答案选项
    2. 验证选项变红
    3. 验证正确答案变绿
    4. 验证显示解释说明
  预期结果: 错误反馈 + 显示正确答案

TC2.4: 锁定模块点击测试
  前置条件: 进入课程详情页
  步骤:
    1. 点击锁定的模块
    2. 验证显示提示信息
  预期结果: 显示 "Complete previous modules first" 提示

TC2.5: "You're here" 标签测试
  前置条件: 进入课程详情页
  步骤:
    1. 查看当前学习位置
    2. 验证显示 "You're here" 标签
  预期结果: 当前模块显示 "You're here" 标签
```

#### 2.4 验收标准

- [ ] 学习内容最后一页后显示 Quiz
- [ ] Quiz 显示问题和 4 个选项
- [ ] 选择正确答案后显示绿色反馈
- [ ] 选择错误答案后显示红色反馈 + 正确答案
- [ ] 显示解释说明
- [ ] 完成 Quiz 后模块标记完成
- [ ] 锁定模块点击显示提示
- [ ] 当前学习位置显示 "You're here" 标签
- [ ] 所有单元测试通过

---

### 阶段 3：Quiz 引导流程重构（2.5 小时）

**目标**：使注册前 Quiz 引导流程与原站 Coursiv.io 完全一致

#### 3.1 原站 vs 本地站差异

| 项目 | 原站 Coursiv | 本地站 | 需修复 |
|------|-------------|--------|--------|
| 第一步标题 | "28-DAY AI CHALLENGE" | 无 | ✅ |
| 第一步问题 | "How would you describe yourself?" | "Who are you?" | ✅ |
| 第一步选项 | 2个（带真人照片） | 5个（带Emoji） | ✅ |
| 总步骤数 | 20 步 | 22 步 | ✅ |
| 进度位置 | 右上角 "X / 20" | 中间 "Step X of 22" | ✅ |
| 社交证明页 | "More than 700,000 people joined" | 有 | ✅ |
| 中间鼓励页 | "You're doing great!" | 无 | ✅ |
| 底部法律链接 | Terms / Privacy | 无 | ✅ |

#### 3.2 任务清单

| 任务 | 描述 | 时间 |
|------|------|------|
| 3.2.1 | 重构 Quiz 第一步（二选一 + 照片） | 30 分钟 |
| 3.2.2 | 添加 "28-DAY AI CHALLENGE" 标题 | 10 分钟 |
| 3.2.3 | 调整总步骤为 20 步 | 20 分钟 |
| 3.2.4 | 修改进度显示位置和格式 | 15 分钟 |
| 3.2.5 | 添加中间鼓励页 | 20 分钟 |
| 3.2.6 | 添加底部法律链接 | 15 分钟 |
| 3.2.7 | 修复注册后跳转逻辑 | 30 分钟 |
| 3.2.8 | 运行测试验证 | 20 分钟 |

#### 3.3 E2E 测试用例

```
TC3.1: Quiz 第一步测试
  前置条件: 访问主页
  步骤:
    1. 点击 "Get Started" 按钮
    2. 验证显示 "28-DAY AI CHALLENGE" 标题
    3. 验证显示 "How would you describe yourself?" 问题
    4. 验证显示 2 个选项（带真人照片）
  预期结果: 与原站一致

TC3.2: Quiz 进度显示测试
  前置条件: 进入 Quiz 流程
  步骤:
    1. 完成第一步
    2. 验证右上角显示 "1 / 20"
    3. 完成更多步骤
    4. 验证进度正确更新
  预期结果: 进度显示在右上角，格式为 "X / 20"

TC3.3: 中间鼓励页测试
  前置条件: 进入 Quiz 流程
  步骤:
    1. 完成到第 10 步
    2. 验证显示鼓励页
  预期结果: 显示 "You're doing great!" 或类似鼓励信息

TC3.4: 注册后跳转测试
  前置条件: 完成 Quiz 流程并注册
  步骤:
    1. 完成注册
    2. 验证直接进入 Dashboard
    3. 刷新页面
    4. 验证仍在 Dashboard
  预期结果: 不会重复进入 Quiz 流程

TC3.5: 已注册用户访问 Quiz 测试
  前置条件: 已登录用户
  步骤:
    1. 直接访问 /quiz/1
    2. 验证重定向到 Dashboard
  预期结果: 已注册用户不能再次进入 Quiz
```

#### 3.4 验收标准

- [ ] Quiz 第一步显示 "28-DAY AI CHALLENGE" 标题
- [ ] Quiz 第一步显示 2 个选项（带真人照片）
- [ ] 进度显示在右上角，格式为 "X / 20"
- [ ] 总步骤为 20 步
- [ ] 中间显示鼓励页
- [ ] 底部显示法律链接
- [ ] 注册后直接进入 Dashboard
- [ ] 已注册用户访问 Quiz 重定向到 Dashboard
- [ ] 所有单元测试通过

---

## 四、测试策略

### 4.1 测试类型

| 类型 | 工具 | 覆盖范围 |
|------|------|----------|
| 单元测试 | Vitest | 组件逻辑、工具函数 |
| E2E 测试 | 手动 + 浏览器自动化 | 完整用户流程 |
| 对比测试 | 浏览器并排对比 | 与原站一致性 |

### 4.2 测试流程

每阶段按以下流程执行：

```
1. 编写测试用例
   ↓
2. 运行测试（预期失败）
   ↓
3. 实施功能
   ↓
4. 运行测试
   ↓
5. 如有失败 → 修复 Bug → 回到步骤 4
   ↓
6. 全部通过
   ↓
7. 手动验证
   ↓
8. 与原站对比
   ↓
9. 保存检查点
   ↓
10. 下一阶段
```

### 4.3 回归测试

每阶段完成后运行完整测试套件：

```bash
cd /home/ubuntu/coursiv-landing
pnpm test
```

---

## 五、时间估算

| 阶段 | 任务 | 时间 |
|------|------|------|
| 阶段 1 | 核心交互修复 | 2 小时 |
| 阶段 2 | 课程 Quiz 功能实现 | 2 小时 |
| 阶段 3 | Quiz 引导流程重构 | 2.5 小时 |
| **总计** | | **6.5 小时** |

---

## 六、风险与缓解

| 风险 | 影响 | 缓解措施 |
|------|------|----------|
| Quiz 流程重构复杂度高 | 可能超时 | 分步实施，先实现核心功能 |
| 原站 Quiz 流程可能更新 | 需要重新对比 | 保存原站截图作为参考 |
| 测试覆盖不完整 | 遗漏 Bug | 增加手动测试环节 |

---

## 七、交付物

### 7.1 代码交付

- [ ] 修复后的 LessonContent.tsx
- [ ] 新增 QuizPage.tsx 组件
- [ ] 新增 ComingSoon.tsx 组件
- [ ] 修复后的 Dashboard.tsx（课程 ID）
- [ ] 修复后的 LandingPage.jsx（按钮链接）
- [ ] 修复后的 Navbar.tsx（导航链接）
- [ ] 重构后的 Quiz 流程组件

### 7.2 测试交付

- [ ] 新增单元测试用例
- [ ] E2E 测试报告
- [ ] 与原站对比报告

### 7.3 文档交付

- [ ] 更新 todo.md
- [ ] 更新 CHANGELOG.md

---

## 八、确认事项

请确认以下内容：

1. **阶段划分是否合理？**（3 个阶段，每阶段约 2 小时）

2. **测试用例是否完整？**（共 15 个 E2E 测试用例）

3. **优先级是否正确？**
   - 阶段 1：核心交互修复（P0 问题）
   - 阶段 2：课程 Quiz 功能（P1 功能）
   - 阶段 3：Quiz 引导流程（P1 功能）

4. **是否有遗漏的功能？**

确认后我将从阶段 1 开始实施。
