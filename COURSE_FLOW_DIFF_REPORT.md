# 课程内流程差异对比报告

## 概述

本文档对比了我们的网站与 Coursiv 在课程内流程方面的差异，作为进一步改进的参考。

---

## 一、整体架构差异

| 功能 | Coursiv | 我们的实现 | 差异级别 |
|------|---------|-----------|---------|
| 课程路径页面 | 蛇形路径布局，模块间有曲线连接 | 垂直列表布局 | P2 |
| 课程内容页面 | 独立全屏页面，进度条在顶部 | 独立全屏页面，进度条在顶部 | ✅ 一致 |
| Quiz 展示方式 | 嵌入在内容页面中的卡片 | 独立全屏页面 | P1 |
| Playground | 嵌入在内容页面中的卡片 | 独立全屏页面 | P1 |
| 进度保存 | 自动保存，显示百分比 | 未实现 | P0 |

---

## 二、课程内容页面差异

### 2.1 页面头部

| 元素 | Coursiv | 我们的实现 | 差异级别 |
|------|---------|-----------|---------|
| 关闭按钮 | X 图标，左上角 | X 图标，左上角 | ✅ 一致 |
| 进度条 | 灰色背景 + 紫色填充，顶部居中 | 灰色背景 + 紫色填充，顶部居中 | ✅ 一致 |
| 音频按钮 | 右上角，可切换音频模式 | 右上角，仅图标展示 | P2 |
| 反馈按钮 | 右下角，旗帜图标 | 未实现 | P3 |

### 2.2 内容区域

| 元素 | Coursiv | 我们的实现 | 差异级别 |
|------|---------|-----------|---------|
| 标题 | 大号加粗，黑色 | 大号加粗，黑色 | ✅ 一致 |
| 正文 | 段落文本，支持加粗 | 段落文本，支持加粗 | ✅ 一致 |
| 插图 | 居中显示，圆角 | 居中显示，圆角 | ✅ 一致 |
| 动画效果 | 页面切换有淡入淡出动画 | 无动画 | P2 |

### 2.3 Continue 按钮

| 元素 | Coursiv | 我们的实现 | 差异级别 |
|------|---------|-----------|---------|
| 位置 | 底部固定，全宽 | 底部固定，全宽 | ✅ 一致 |
| 颜色 | 紫色背景，白色文字 | 紫色背景，白色文字 | ✅ 一致 |
| 圆角 | 大圆角 | 大圆角 | ✅ 一致 |

---

## 三、Quiz 单选题差异

### 3.1 整体布局

| 元素 | Coursiv | 我们的实现 | 差异级别 |
|------|---------|-----------|---------|
| 展示方式 | 嵌入在内容页面中的卡片 | 独立全屏页面 | **P1** |
| 上下文说明 | 有，在 Quiz 卡片上方 | 无 | **P1** |
| 卡片样式 | 白色背景，圆角边框，阴影 | 白色背景，圆角边框 | P2 |

### 3.2 选项样式

| 元素 | Coursiv | 我们的实现 | 差异级别 |
|------|---------|-----------|---------|
| 未选中状态 | 灰色边框，白色背景 | 灰色边框，白色背景 | ✅ 一致 |
| 选中状态 | 紫色圆点图标 | 紫色边框 + 背景 | P2 |
| 正确答案 | 绿色勾选图标 | 绿色勾选图标 | ✅ 一致 |
| 错误答案 | 红色 X 图标 | 红色 X 图标 | ✅ 一致 |

### 3.3 按钮样式

| 元素 | Coursiv | 我们的实现 | 差异级别 |
|------|---------|-----------|---------|
| Hint 按钮 | 紫色文字，左侧 | 紫色文字，问号图标 | P2 |
| Submit 按钮 | 紫色背景（激活），灰色（禁用） | 紫色背景（激活），灰色（禁用） | ✅ 一致 |
| 按钮位置 | Hint 左侧，Submit 右侧 | Hint 上方，Submit 下方 | P2 |

### 3.4 反馈样式

| 元素 | Coursiv | 我们的实现 | 差异级别 |
|------|---------|-----------|---------|
| 正确反馈 | 绿色左边框 + "Correct answer" | 绿色背景 + "Correct!" | P2 |
| 错误反馈 | 红色左边框 + "Incorrect" | 红色背景 + "Incorrect" | P2 |
| 反馈位置 | Quiz 卡片内部 | Quiz 卡片下方 | P2 |
| 解释文字 | 有，如 "Exactly!" | 有 | ✅ 一致 |

---

## 四、Playground 填空题差异

### 4.1 整体布局

| 元素 | Coursiv | 我们的实现 | 差异级别 |
|------|---------|-----------|---------|
| 展示方式 | 嵌入在内容页面中的卡片 | 独立全屏页面 | **P1** |
| AI 工具标签 | 左上角，图标 + 名称 | 左上角，图标 + 名称 | ✅ 一致 |

### 4.2 Prompt 模板

| 元素 | Coursiv | 我们的实现 | 差异级别 |
|------|---------|-----------|---------|
| 文本样式 | 黑色文字 | 黑色文字 | ✅ 一致 |
| 空白占位符 | 紫色边框，圆角，可点击 | 紫色边框，圆角 | ✅ 一致 |
| 已填入词汇 | 紫色背景淡色 | 紫色背景淡色 | ✅ 一致 |

### 4.3 选项按钮

| 元素 | Coursiv | 我们的实现 | 差异级别 |
|------|---------|-----------|---------|
| 样式 | 白色背景，灰色边框，圆角 | 白色背景，灰色边框，圆角 | ✅ 一致 |
| 点击后 | 选项消失 | 选项消失 | ✅ 一致 |
| 退格功能 | 有，删除最后填入的词汇 | 有 | ✅ 一致 |

### 4.4 Check 按钮

| 元素 | Coursiv | 我们的实现 | 差异级别 |
|------|---------|-----------|---------|
| 禁用状态 | 灰色背景 | 灰色背景 | ✅ 一致 |
| 激活状态 | 紫色背景 | 紫色背景 | ✅ 一致 |

### 4.5 成功反馈

| 元素 | Coursiv | 我们的实现 | 差异级别 |
|------|---------|-----------|---------|
| 分割线 | 绿色水平线 | 绿色水平线 | ✅ 一致 |
| 图标 | 绿色勾选 | 绿色勾选 | ✅ 一致 |
| 标题 | "Amazing!" | "Amazing!" | ✅ 一致 |
| 描述 | "You're right on track..." | "You're right on track..." | ✅ 一致 |
| 结果图片 | AI 生成图片 | AI 预生成图片 | ✅ 一致 |
| Continue 按钮 | 绿色背景 | 绿色背景 | ✅ 一致 |

---

## 五、课程进度功能差异

| 功能 | Coursiv | 我们的实现 | 差异级别 |
|------|---------|-----------|---------|
| 进度百分比 | 显示在课程路径页面 | 未实现 | **P0** |
| 模块完成状态 | 绿色背景 + 勾选图标 | 未实现 | **P0** |
| 自动保存 | 每页完成后自动保存 | 未实现 | **P0** |
| 证书进度 | 显示证书解锁进度 | 未实现 | P2 |

---

## 六、优先级改进建议

### P0 阻塞性问题（必须修复）

1. **课程进度保存功能**
   - 实现每页完成后自动保存进度
   - 在课程路径页面显示进度百分比
   - 已完成模块显示绿色背景 + 勾选图标

### P1 高优先级问题（建议修复）

1. **Quiz 展示方式**
   - 将 Quiz 从独立页面改为嵌入在内容页面中的卡片
   - 添加上下文说明文字

2. **Playground 展示方式**
   - 将 Playground 从独立页面改为嵌入在内容页面中的卡片

### P2 中等优先级问题（可选修复）

1. **页面切换动画**
   - 添加淡入淡出动画效果

2. **Quiz 选项样式**
   - 选中状态改为紫色圆点图标
   - Hint 和 Submit 按钮改为左右布局

3. **Quiz 反馈样式**
   - 改为绿色/红色左边框样式
   - 反馈位置改为 Quiz 卡片内部

4. **课程路径页面**
   - 改为蛇形路径布局

### P3 低优先级问题（未来考虑）

1. **反馈按钮**
   - 添加右下角旗帜图标反馈按钮

2. **音频功能**
   - 实现音频播放功能

---

## 七、实现建议

### 7.1 P0 课程进度保存

**数据库表设计**:
```sql
CREATE TABLE user_course_progress (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  course_id VARCHAR(255),
  module_id VARCHAR(255),
  lesson_id VARCHAR(255),
  page_index INTEGER,
  completed BOOLEAN DEFAULT FALSE,
  completed_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

**API 端点**:
- `POST /api/progress/save` - 保存进度
- `GET /api/progress/:courseId` - 获取课程进度

### 7.2 P1 Quiz/Playground 嵌入式展示

**组件改造**:
1. 将 QuizSinglePage 改为 QuizCard 组件
2. 将 PlaygroundPage 改为 PlaygroundCard 组件
3. 在 CourseViewer 中根据页面类型渲染对应卡片

### 7.3 P2 动画效果

**推荐方案**:
- 使用 Framer Motion 实现页面切换动画
- 添加 `AnimatePresence` 包裹页面组件

---

## 八、测试检查清单

### 课程内容流程

- [ ] 从 Dashboard 进入 Guides
- [ ] 点击课程卡片进入课程详情
- [ ] 点击模块查看预览弹窗
- [ ] 点击 Read 进入课程内容
- [ ] Continue 翻页功能正常
- [ ] 进度条正确更新
- [ ] 关闭按钮返回课程详情

### Quiz 功能

- [ ] 显示问题和选项
- [ ] 点击选项显示选中状态
- [ ] Hint 按钮显示提示
- [ ] Submit 按钮状态正确
- [ ] 正确答案显示绿色反馈
- [ ] 错误答案显示红色反馈
- [ ] Continue 按钮进入下一页

### Playground 功能

- [ ] 显示 Prompt 模板
- [ ] 空白占位符可点击
- [ ] 选项点击填入空白
- [ ] 选项消失机制正确
- [ ] 退格删除功能正常
- [ ] Check 按钮状态正确
- [ ] 成功反馈显示图片
- [ ] Continue 按钮进入下一题

### 课程进度

- [ ] 进度百分比显示正确
- [ ] 已完成模块显示绿色
- [ ] 进度自动保存
- [ ] 重新进入可继续学习

---

## 九、总结

| 差异级别 | 数量 | 说明 |
|---------|------|------|
| P0 | 3 | 课程进度保存功能缺失 |
| P1 | 2 | Quiz/Playground 展示方式差异 |
| P2 | 8 | 样式和动画差异 |
| P3 | 2 | 次要功能缺失 |

**整体评估**: 核心交互功能已实现，主要差异在于展示方式和进度保存功能。建议优先实现 P0 课程进度保存功能，然后逐步优化 P1/P2 问题。
