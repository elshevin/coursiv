# Coursiv 上线检查清单

## 一、必须完成的核心功能

### 1. 支付系统集成 🔴 未完成
目前 Upsell 页面的支付按钮只是跳转到 Dashboard，需要接入真实支付：

| 待办事项 | 说明 |
|---------|------|
| 选择支付服务商 | 推荐 Stripe（国际）或 Paddle（处理税务更简单） |
| 创建支付 API 端点 | 在 `server/routers.ts` 中添加支付相关路由 |
| 实现订阅/一次性付款逻辑 | 根据业务模式选择 |
| 添加支付成功/失败页面 | 处理支付回调 |
| 用户订阅状态管理 | 数据库中记录用户付费状态 |
| Webhook 处理 | 处理支付平台的异步通知 |

### 2. 数据库配置 🔴 未完成
目前使用本地 SQLite 开发模式，生产环境需要配置 MySQL/TiDB：

| 待办事项 | 说明 |
|---------|------|
| 配置 DATABASE_URL | 设置生产数据库连接字符串 |
| 运行数据库迁移 | 执行 `pnpm db:push` 创建表结构 |
| 配置数据库备份 | 设置定期备份策略 |

---

## 二、安全与配置

### 3. 环境变量配置 🟡 需要配置

| 环境变量 | 用途 | 状态 |
|---------|------|------|
| `DATABASE_URL` | MySQL 数据库连接 | 需配置 |
| `JWT_SECRET` | JWT 签名密钥（至少32位随机字符串） | 需配置 |
| `NODE_ENV` | 设为 `production` | 需配置 |
| `VITE_APP_ID` | 应用 ID | 可选 |

### 4. 安全检查 🟡 建议完成

| 待办事项 | 说明 |
|---------|------|
| HTTPS 配置 | 确保生产环境使用 HTTPS |
| CORS 配置 | 限制允许的域名 |
| Rate Limiting | 添加 API 请求频率限制 |
| 输入验证 | 确保所有用户输入都经过验证 |
| 密码强度要求 | 当前最低 6 位，建议提高 |

---

## 三、法律合规

### 5. 法律页面 🟡 需要完成

| 页面 | 当前状态 | 说明 |
|------|---------|------|
| Privacy Policy | 链接为 `#` | 需要创建真实页面 |
| Terms and Conditions | 链接为 `#` | 需要创建真实页面 |
| Subscription Terms | 链接为 `#` | 需要创建真实页面 |
| Cookie Policy | 未添加 | 如果使用 Cookie 需要添加 |
| GDPR 合规 | 未实现 | 如果面向欧洲用户需要 |

---

## 四、内容与功能

### 6. 课程内容 ✅ 已有基础内容
- 9 门 AI 工具课程已配置
- 每门课程有多个模块和课时
- 课程内容使用 `lessonContent.ts` 中的数据

**可选优化：**
- 补充更多课程详细内容
- 添加视频/音频内容
- 添加更多练习题

### 7. 功能完整性检查

| 功能 | 状态 | 说明 |
|------|------|------|
| 用户注册/登录 | ✅ 完成 | 邮箱密码登录 |
| Quiz 问卷 | ✅ 完成 | 用户偏好收集 |
| Dashboard | ✅ 完成 | 统计数据已接入真实数据 |
| Onboarding | ✅ 完成 | 新用户引导流程 |
| 课程列表 | ✅ 完成 | 9 门课程 |
| 课程学习 | ✅ 完成 | 阅读/听力模式 |
| 学习进度 | ✅ 完成 | 保存到数据库 |
| Challenges | ✅ 完成 | 挑战活动 |
| Prompts Library | ✅ 完成 | 提示词库 |
| Settings | ✅ 完成 | 用户设置 |
| Profile | ✅ 完成 | 学习进度展示 |

---

## 五、部署相关

### 8. 部署配置 🟡 需要完成

| 待办事项 | 说明 |
|---------|------|
| 选择部署平台 | Vercel、Railway、Fly.io 等 |
| 配置域名 | 绑定自定义域名 |
| SSL 证书 | 配置 HTTPS |
| CDN 配置 | 静态资源加速（可选） |
| 监控告警 | 配置错误监控（Sentry 等） |

### 9. SEO 与分析 🟡 建议完成

| 待办事项 | 说明 |
|---------|------|
| Meta 标签 | 添加 title、description、og 标签 |
| Google Analytics | 添加流量分析 |
| Sitemap | 生成站点地图 |
| robots.txt | 配置搜索引擎爬虫规则 |

---

## 六、测试

### 10. 上线前测试 🟡 建议完成

| 测试项 | 说明 |
|--------|------|
| 完整用户流程测试 | 从注册到付费到学习 |
| 移动端适配测试 | 确保移动端体验良好 |
| 浏览器兼容性 | Chrome、Safari、Firefox、Edge |
| 性能测试 | 页面加载速度 |
| 支付流程测试 | 使用测试卡号测试 |

---

## 优先级排序

### 🔴 上线前必须完成（阻塞上线）
1. **支付系统集成** - 核心商业功能
2. **数据库配置** - 生产环境必需
3. **环境变量配置** - 安全必需

### 🟡 强烈建议完成
4. 法律页面（Privacy Policy、Terms）
5. HTTPS 配置
6. 基础安全检查

### 🟢 可以后续迭代
7. SEO 优化
8. 监控告警
9. 更多课程内容
10. 高级功能

---

## 快速启动命令

```bash
# 安装依赖
pnpm install

# 开发模式
pnpm dev

# 构建生产版本
pnpm build

# 数据库迁移
pnpm db:push

# 启动生产服务
pnpm start
```

## 环境变量模板

```env
# 数据库
DATABASE_URL=mysql://user:password@host:3306/database

# 安全
JWT_SECRET=your-32-character-random-secret-key

# 应用
NODE_ENV=production
PORT=3000
```
